# @rgrove/parse-xml API Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Functions



### parseXml

Parses the given XML string and returns an `XmlDocument` instance representing
the document tree.

#### Parameters

*   `xml` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** XML string to parse.
*   `options` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Parsing options.

    *   `options.ignoreUndefinedEntities` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When `true`, an undefined named entity (like "\&bogus;") will be left in the
        output as is instead of causing a parse error. (optional, default `false`)
    *   `options.preserveCdata` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When `true`, CDATA sections will be preserved in the document as `XmlCdata`
        nodes. Otherwise CDATA sections will be represented as `XmlText` nodes,
        which keeps the node tree simpler and easier to work with. (optional, default `false`)
    *   `options.preserveComments` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When `true`, comments will be preserved in the document as `XmlComment`
        nodes. Otherwise comments will not be included in the node tree. (optional, default `false`)
    *   `options.sortAttributes` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** When `true`, attributes in an element's `attributes` object will be sorted
        in alphanumeric order by name. Otherwise they'll retain their original order
        as found in the XML. (optional, default `false`)

#### Examples

```javascript
const parseXml = require('@rgrove/parse-xml');
let doc = parseXml('<kittens fuzzy="yes">I like fuzzy kittens.</kittens>');
```

Returns **[XmlDocument](#xmldocument)** 

## XML Node Classes

All nodes in a parsed XML document are represented by an instance of one
of the following classes. Each class inherits from the base `XmlNode`
class, which provides common functionality that's available on every node.

While the use of classes to represent XML nodes may seem a little
old-school, it has many benefits. It allows static analysis, provides
better type safety, and also offers some performance benefits over using
plain objects, since JS engines are better able to optimize class
instances in some cases.

If you'd prefer to work with plain objects, you can easily convert any
node (including an entire document) to a plain object tree by calling its
`toJSON()` method:

```js
let plainDoc = parseXml(xml).toJSON();
```

In addition, any node (including the document) can safely be serialized to
a JSON string without any special steps simply by passing it to
`JSON.stringify()`. So converting an XML document to JSON is as easy as:

```js
let json = JSON.stringify(parseXml(xml));
```

### XmlCdata

**Extends XmlText**

A CDATA section within an XML document.

### XmlComment

**Extends XmlNode**

A comment within an XML document.

#### Parameters

*   `content` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?**  (optional, default `''`)

#### content

Content of this comment.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### XmlDocument

**Extends XmlNode**

Represents an XML document. All elements within the document are descendants of
this node.

#### Parameters

*   `children` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<([XmlComment](#xmlcomment) | [XmlElement](#xmlelement) | [XmlProcessingInstruction](#xmlprocessinginstruction))>?**  (optional, default `[]`)

#### children

Child nodes of this document.

Type: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<([XmlComment](#xmlcomment) | [XmlElement](#xmlelement) | [XmlProcessingInstruction](#xmlprocessinginstruction))>

#### root

Root element of this document, or `null` if this document is empty.

Type: [XmlElement](#xmlelement)?

#### text

Text content of this document and all its descendants.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### XmlElement

**Extends XmlNode**

Element in an XML document.

#### Parameters

*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
*   `attributes`   (optional, default `Object.create(null)`)
*   `children` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<([XmlCdata](#xmlcdata) | [XmlComment](#xmlcomment) | [XmlElement](#xmlelement) | [XmlProcessingInstruction](#xmlprocessinginstruction) | [XmlText](#xmltext))>?**  (optional, default `[]`)

#### name

Name of this element.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### attributes

Attributes on this element.

#### children

Child nodes of this element.

Type: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)<([XmlCdata](#xmlcdata) | [XmlComment](#xmlcomment) | [XmlElement](#xmlelement) | [XmlProcessingInstruction](#xmlprocessinginstruction) | [XmlText](#xmltext))>

#### isEmpty

Whether this node is empty (meaning it has no children).

Type: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

#### text

Text content of this element and all its descendants.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### XmlNode

Base interface for a node in an XML document.

#### parent

Parent node of this node, or `null` if this node has no parent.

Type: ([XmlDocument](#xmldocument) | [XmlElement](#xmlelement) | null)

#### document

Document that contains this node, or `null` if this node is not associated
with a document.

Type: [XmlDocument](#xmldocument)?

#### isRootNode

Whether this node is the root node of the document.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

#### preserveWhitespace

*   **See**: <https://www.w3.org/TR/2008/REC-xml-20081126/#sec-white-space>

Whether whitespace should be preserved in the content of this element and
its children.

This is influenced by the value of the special `xml:space` attribute, and
will be `true` for any node whose `xml:space` attribute is set to
"preserve". If a node has no such attribute, it will inherit the value of
the nearest ancestor that does (if any).

Type: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)

#### type

Type of this node.

The value of this property is a string that matches one of the static `TYPE_*`
properties on the `XmlNode` class (e.g. `TYPE_ELEMENT`, `TYPE_TEXT`, etc.).

The `XmlNode` class itself is a base class and doesn't have its own type name.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### toJSON

Returns a JSON-serializable object representing this node, minus properties
that could result in circular references.

#### TYPE_CDATA

Type value for an `XmlCdata` node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### TYPE_COMMENT

Type value for an `XmlComment` node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### TYPE_DOCUMENT

Type value for an `XmlDocument` node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### TYPE_ELEMENT

Type value for an `XmlElement` node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### TYPE_PROCESSING_INSTRUCTION

Type value for an `XmlProcessingInstruction` node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### TYPE_TEXT

Type value for an `XmlText` node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### XmlProcessingInstruction

**Extends XmlNode**

A processing instruction within an XML document.

#### Parameters

*   `name` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
*   `content` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?**  (optional, default `''`)

#### name

Name of this processing instruction. Also sometimes referred to as the
processing instruction "target".

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

#### content

Content of this processing instruction.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)

### XmlText

**Extends XmlNode**

Text content within an XML document.

#### Parameters

*   `text` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?**  (optional, default `''`)

#### text

Text content of this node.

Type: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)
